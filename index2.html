<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ Crypto Meme Tracker ğŸ¤‘</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        p{
            text-align: center;
            color:antiquewhite;
        }

        .container-fluid{
            text-align: center;
        }
        .delhi:hover{
            color: #ff4d4d;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f111a;
            color: #fff;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
        }

        h1{
            font-size: xx-large;

        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #1a1b2a;
            border-radius: 10px;
            overflow: hidden;
        }
        th, td {
            padding: 12px;
            text-align: center;
        }
        th {
            background: #22233a;
        }
        tr:nth-child(even) { background: #171826; }
        tr:hover { background: #2a2c4a; cursor: pointer; }

        select {
            margin: 10px;
            padding: 5px;
            border-radius: 5px;
            border: none;
        }
        #coinInfo {
            margin-top: 20px;
            background: #1a1b2a;
            padding: 15px;
            border-radius: 10px;
        }
        .green { color: #00ff99; }
        .red { color: #ff4d4d; }
        .emoji { font-size: 1.2em; }
    </style>
</head>
<body>
    <div class = "container-fluid">
        <div class = "container flex-wrap">
    <h1>ğŸš€ Crypto Price Tracker ğŸ¤‘</h1>
    <p>ğŸ’¡ Stay ahead in the crypto game!
Track live prices, market cap, and 24h changes of the Top cryptocurrencies in real-time. From Bitcoin and Ethereum to trending altcoins, get instant insights to make smarter trading and investment decisions. ğŸ“ˆğŸ”¥
</p>


        </div>

    </div>

    <h2>Top Cryptos are Here ğŸ”¥</h2>
<div style="text-align:center; margin-bottom:10px;">
    <input type="text" id="searchInput" placeholder="ğŸ” Search crypto..." style="padding:8px; border-radius:8px; width:250px;">
</div>

<table id="cryptoTable">
    <thead>
        <tr>
            <th>Coin</th>
            <th>Price (USD)</th>
            <th>24h Change</th>
            <th>Market Cap</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

    <h2>Coin Details & Chart ğŸ“ˆ</h2>
    <div style="text-align:center;">
        <select id="coinSelect"></select>
        <select id="timeSelect">
            <option value="1">24 Hours â±ï¸</option>
            <option value="7">7 Days ğŸ“…</option>
            <option value="30">30 Days ğŸ—“ï¸</option>
            <option value="180">6 Months ğŸ—“ï¸</option>
            <option value="365">1 Year ğŸ—“ï¸</option>
            <option value="max">Max ğŸ†</option>

        </select>
    </div>
    <canvas id="coinChart" width="600" height="400"></canvas>
    <div id="coinInfo"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

    <script>
        const coinTableBody = document.querySelector("#cryptoTable tbody");
        const coinSelect = document.getElementById("coinSelect");
        const timeSelect = document.getElementById("timeSelect");
        const coinInfoDiv = document.getElementById("coinInfo");
        let coinChart;

        const fetchTopCoins = async () => {
            try {
               const res = await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false");
                const data = await res.json();
                coinTableBody.innerHTML = "";
                coinSelect.innerHTML = "";

                data.forEach(coin => {
                    const changeClass = coin.price_change_percentage_24h >=0 ? 'green' : 'red';
                    const changeEmoji = coin.price_change_percentage_24h >=0 ? 'ğŸš€' : 'ğŸ’€';

                    coinTableBody.innerHTML += `
                        <tr onclick="coinSelect.value='${coin.id}'; fetchCoinData('${coin.id}', timeSelect.value);">
                            <td>${coin.name} <span class="emoji">${coin.symbol.toUpperCase()}</span></td>
                            <td>$${coin.current_price.toLocaleString()}</td>
                            <td class="${changeClass}">${coin.price_change_percentage_24h.toFixed(2)}% ${changeEmoji}</td>
                            <td>$${coin.market_cap.toLocaleString()}</td>
                        </tr>
                    `;
                    coinSelect.innerHTML += `<option value="${coin.id}">${coin.name}</option>`;
                });

                if(data.length > 0){
                    fetchCoinData(data[0].id, timeSelect.value);
                }
            } catch (error) {
                console.error("Error fetching top coins:", error);
            }
        };

        const fetchCoinData = async (coinId, days) => {
            try {
                const resChart = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&days=${days}`);
                const chartData = await resChart.json();
                const prices = chartData.prices.map(p => ({ x: new Date(p[0]), y: p[1] }));

                if (coinChart) coinChart.destroy();

                const ctx = document.getElementById('coinChart').getContext('2d');
                coinChart = new Chart(ctx, {
                    type: 'line',
                    data: { datasets: [{ label: `${coinSelect.options[coinSelect.selectedIndex].text} Price ğŸ’°`, data: prices, borderColor: 'cyan', fill: false }] },
                    options: {
                        parsing: { xAxisKey: 'x', yAxisKey: 'y' },
                        scales: {
                            x: { type: 'time', time: { unit: days <= 1 ? 'hour' : 'day' }, title: { display: true, text: 'Time' } },
                            y: { title: { display: true, text: 'Price (USD)' } }
                        }
                    }
                });

                const resDetails = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`);
                const details = await resDetails.json();
                const desc = details.description.en ? details.description.en.split('. ')[0] : 'No description available.';

                coinInfoDiv.innerHTML = `
                    <h3>${details.name} ${details.symbol.toUpperCase()} ğŸ’</h3>
                    <p><strong>Current Price:</strong> $${details.market_data.current_price.usd.toLocaleString()} ğŸ¤‘</p>
                    <p><strong>Market Cap:</strong> $${details.market_data.market_cap.usd.toLocaleString()}</p>
                    <p><strong>Total Supply:</strong> ${details.market_data.total_supply?.toLocaleString() || 'N/A'}</p>
                    <p><strong>Description:</strong> ${desc} ğŸ˜</p>
                `;
            } catch (error) {
                console.error("Error fetching coin data:", error);
            }
        };

        coinSelect.addEventListener("change", () => { fetchCoinData(coinSelect.value, timeSelect.value); });
        timeSelect.addEventListener("change", () => { fetchCoinData(coinSelect.value, timeSelect.value); });

        setInterval(fetchTopCoins, 60000);
        fetchTopCoins();


        coinChart = new Chart(ctx, {
    type: 'line',
    data: {
        datasets: [{
            label: `${coinSelect.options[coinSelect.selectedIndex].text} Price ğŸ’°`,
            data: prices,
            borderColor: 'cyan',
            fill: false,
            pointRadius: 0,   // hide points
            borderWidth: 2
        }]
    },
    options: {
        interaction: {
            mode: 'index',   // show value of the nearest X index
            intersect: false // allow hover anywhere on vertical line
        },
        plugins: {
            tooltip: {
                enabled: true,
                mode: 'index',
                intersect: false,
                callbacks: {
                    label: function(context) {
                        let price = context.parsed.y.toLocaleString();
                        let time = new Date(context.parsed.x).toLocaleString();
                        return `ğŸ’° $${price}   ğŸ•’ ${time}`;
                    }
                }
            }
        },
        scales: {
            x: {
                type: 'time',
                time: {
                    unit: days <= 1 ? 'hour' : 'day'
                },
                title: {
                    display: true,
                    text: 'Time'
                }
            },
            y: {
                title: {
                    display: true,
                    text: 'Price (USD)'
                }
            }
        }
    }
});

    </script>

    <p> 
        This site is built by 
        <a href="#">Suraj lakhyani</a> .
        Contact listed information for further details.
    </p>
    <br>

    <a href="#" class="delhi" >lakhyanisuraj@gmail.com</a>
    <p>    </p>
    <a href="#" class="delhi" >www.codewithsuraj.com</a>

</body>
</html>
